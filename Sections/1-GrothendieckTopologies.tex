\section{Grothendieck topologies}
The aim of this section is to introduce
the concept of Grothendieck topology on a category,
in order to describe sheaves on such category.
The main idea behind this construction is that one can reduce
the definition of open coverings to a few formal axioms, translating
inclusions with arrows in a category and
intersections with fibered products.


\begin{rem}[Open subsets of a topological space]
	Let $X$ be a topological space. 
	One can define the category $\mathsf{Op}(X)$ of open subsets of $X$, whose
	objects are just open subsets $U \subset X$.
	Arrows in this category, moreover, are given by:
	\begin{equation*}
	\mathrm{Hom}_{\mathsf{Op}(X)} \left( U, V \right) =
	\begin{cases}
		\left\{ * \right\} & \text{if } U \subset V\\
		\emptyset & \text{otherwise}
	\end{cases} 
	.\end{equation*}
	This is the motivating example for the following constructions.
	In fact arrows in $\mathsf{Op}(X)$ are inclusions and
	fibered products correspond to intersections.
\end{rem}


\begin{defn}[Sites]
	Let $\mathsf{C}$ be a category. 
	A {\em pretopology} on $\mathsf{C}$ is the assignment, to each object $U \in \mathsf{C}$,
	of a collection of sets of arrows $\left\{ U_{ i } \to U \right\}_{ i \in I }$,
	called {\em coverings} of $U$, such that the following conditions are satisfied:
	\begin{enumerate}
		\item Given an isomorphism $V \xrightarrow{\sim} U$, the set $\left\{ V \to U \right\}$
			is a covering.
		\item Given a covering $\left\{ U_{ i } \to U \right\}_{ i \in I }$
			of $U$ and a morphism $V \to U$, then the fibered products
			$\left\{ U_i \cross_{ U } V \right\}_{i \in I}$ exist
			and the set of projections
			$\left\{ U_i \cross_{ U } V \to V \right\}_{ i \in I }$
			is a covering of $V$.
		\item Given a covering $\left\{ U_{ i } \to U \right\}_{ i \in I }$
			and, for each index $i \in I$, a covering 
			$\left\{ U_{ ij } \to U_i \right\}_{ j \in J_i }$ of $U_i$,
			the set of composite morphisms
			$\left\{ U_{ ij } \to U \right\}_{ i \in I, j \in J_i }$
			is a covering of $U$.
	\end{enumerate}
	A category with a Grothendieck pretopology is called a {\em site}.
\end{defn}


\begin{rem}[]
	From properties $2$ and $3$ above it follows that, given 
	two coverings of the same object $\left\{ U_{ i } \to U \right\}_{ i \in I }$
	and $\left\{ V_{ i } \to U \right\}_{ j \in J }$, also
	$\left\{ U_{ i } \cross_U V_j \to U \right\}_{ (i,j) \in I \cross J }$
	is a covering of $U$.
\end{rem}


\noindent
Before moving on to some examples, we should introduce a
concept which plays an important role in the definition of
some important pretopologies.
\begin{defn}[Jointly surjective family of morphisms]
	For $\mathsf{C} = \mathsf{Sets}$ or $\mathsf{C} = \mathsf{Sch}/S$, for some scheme $S$,
	we will say that a family of morphisms
	$\left\{ U_{ i } \to U \right\}_{ i \in I }$ is {\em jointly surjective} iff
	the set-theoretic union of the images is $U$.
\end{defn}


\noindent
Let's now give some examples.
\begin{ex}\leavevmode\vspace{-.2\baselineskip}
\begin{enumerate}
	\item The {\em site of a topological space}.
		Let $X$ be a topological space, and $\mathsf{Op}(X)$ denote the category of
		open subsets of $X$.
		Then, to each $U \in \mathsf{Op}(X)$, we associate it the family of all
		open coverings of $U$.
		Recalling that, given two open subsets
		$U_1 \hookrightarrow  U$ and $U_2 \hookrightarrow  U$, 
		their fibered product is just their intersection, i.e. 
		$U_1 \cross_{ U } U_2 = U_1 \cap U_2$,
		one easily checks that this defines a pretopology on $\mathsf{Op}(X)$.


	\item The {\em global classical topology} on $\mathsf{Top}$.
		Given $U \in \mathsf{Top}$, its coverings are all families of jointly surjective
		collections of open embeddings $U_i \to U$.
		Here open embedding means open, continuous, injective map and not
		only the set theoretic inclusion of a subspace.


%	\item The {\em small {\'e}tale site of a scheme}.
%		Let $X$ be a scheme and $X_{\mathrm{ét}}$ be the full subcategory
%		of $\mathsf{Sch}_{ X }$, with objects $U \in X_{\mathrm{ét}}$ s.t.
%		the structure morphism $U \to X$ is étale, of finite presentation.
%		Then a covering of $U \in X_{\mathrm{ét}}$ is a jointly surjective
%		collection of morphisms $U_i \to U$.

\end{enumerate}
Let's now give a couple of examples on $\mathsf{Sch}/S$, for a fixed scheme $S$.
\begin{enumerate}[resume]
	\item The {\em global Zariski topology}.
		A covering $\left\{ U_{ i } \to U \right\}_{ i \in I }$ is a 
		jointly surjective collection of 
		open embeddings.
		

	\item The {\em global étale topology}.
		A covering $\left\{ U_{ i } \to U \right\}_{ i \in I }$ is a 
		jointly surjective collection of 
		étale maps.

	\item The {\em fppf topology}.
		A covering $\left\{ U_{ i } \to U \right\}_{ i \in I }$ is a 
		jointly surjective collection of 
		flat maps locally of finite presentation.
		The acronym {\em fppf} stands for 
		"fidèlement plat et de présentation finie".
\end{enumerate}
\end{ex}

\begin{prop}[{\cite[\S 2.3.2]{Vistoli}}]\label{prop:Conditionsfpqc}
	Let $f\colon X \to Y$ be a surjective morphism of schemes. The following are equivalent.
\begin{enumerate}
	\item Every quasi-compact open subset of $Y$ is the image of a quasi-compact
		open subset of $X$.
	\item There exists a covering $\left\{ V_i \right\}_{i \in I}$ of $Y$ by open affine 
		subschemes, such that each $V_i$ is the image of a quasi-compact
		open subset of $X$.
	\item Given a point $x \in X$, there exists an open neighbourhood $U$ of $x$
		in $X$, such that the image $f(U)$ is open in $Y$ and the restriction
		$\left.f\right|_{U}$ is a quasi-compact morphism of schemes, i.e.
		the inverse image of any quasi-compact open subset of $f(U)$ is
		quasi-compact in $U$.
	\item Given a point $x \in X$, there exists an open neighbourhood $U$ of $x$
		in $X$ such that the image $f(U)$ is open and affine in $Y$.
\end{enumerate}
\end{prop}


\begin{defn}[fpqc morphism]
	An {\em fpqc morphism of schemes} is a faithfully flat morphism
	that satisfies the equivalent conditions of \cref{prop:Conditionsfpqc}.
	The acronym {\em fpqc} stands for "fidèlement plat et quasi-compact".
\end{defn}


\begin{rem}[fpqc topology]
	It can be shown, see \cite[\S 2.3.2]{Vistoli},
	that on $\mathsf{Sch}/S$, the data
	of coverings $\left\{ U_{ i } \to U \right\}_{ i \in I }$, for each $U \in \mathsf{Sch}/S$,
	s.t. the induced morphism $\amalg_i U_i \to U$ is {\em fpqc},
	is a pretopology on $\mathsf{Sch}/S$.
	This pretopology is called the {\em fpqc topology}.
\end{rem}


\noindent
Let's now investigate the relations between different topologies:
\begin{defn}[Refinement of a covering and subordinate pretopologies]\leavevmode\vspace{-\baselineskip}
\begin{enumerate}
\item Let $\mathsf{C}$ be a category and $\left\{ U_{ i } \to U \right\}_{ i \in I }$
	a set of arrows in $\mathsf{C}$.
	A {\em refinement} of $\left\{ U_{ i } \to U \right\}_{ i \in I }$ is
	another set of arrows $\left\{ V_{ a } \to U \right\}_{ a \in A }$,
	such that, for all $a \in A$, there is some $i \in I$ s.t.
	$V_a \to U$ factors through $U_i \to U$.


\item Let now $\tau$ and $\tau'$ be two pretopologies on $\mathsf{C}$.
	We say that $\tau'$ is {\em subordinate} to $\tau$ iff
	every covering in $\tau'$ has a refinement which is
	a covering in $\tau$.
\end{enumerate}
\end{defn}


\noindent
The topologies we just introduced are in strong relation between them.
In fact each is subordinate to the one we defined afterwards:
\begin{rem}[{\cite[\href{https://stacks.math.columbia.edu/tag/020K}{Chapter 020K}]{SP}}]
	\leavevmode\vspace{-\baselineskip}
\begin{enumerate}
\item Any Zariski covering is an étale covering, 
	\cite[\href{https://stacks.math.columbia.edu/tag/0216}{Lemma 0216}]{SP}.
	Hence the Zariski topology is subordinate to the étale one.


\item Any étale covering is an {\em fppf} covering, 
	\cite[\href{https://stacks.math.columbia.edu/tag/021N}{Lemma 021N}]{SP}.
	Hence the étale topology is subordinate to the {\em fppf} one.


\item Any {\em fppf} covering is an {\em fpqc} covering, 
	\cite[\href{https://stacks.math.columbia.edu/tag/022C}{Lemma 022C}]{SP}.
	Hence the {\em fppf} topology is subordinate to the {\em fpqc} one.
\end{enumerate}
\end{rem}



\subsection{Sheaves}
The definition of sheaves on a topological space only
depends on the datum of possible open coverings for a given object of
the category $\mathsf{Op}(X)$.
Then the introduction of pretopologies allows one to define sheaves on sites.


\begin{defn}[Presheaves]
	Let $\mathsf{C}$ be any category.
	A {\em presheaf} on $\mathsf{C}$ is just a contravariant functor with
	values in sets:
	\begin{equation*}
	\begin{tikzcd}[row sep = 0ex
		,/tikz/column 1/.append style={anchor=base east}
		,/tikz/column 2/.append style={anchor=base west}]
		F\colon \mathsf{C}^{op} \arrow[r, "", rightarrow] &
		\mathsf{Sets}
	.\end{tikzcd}
	\end{equation*} 
	Moreover we define the category of presheaves on $\mathsf{C}$,
	denoted by $\mathsf{PSh}(\mathsf{C})$ as the category
	whose objects are presheaves on $\mathsf{C}$ and
	morphisms are natural transformations of functors.
\end{defn}


\begin{defn}[Sheaves]
	Let $\mathsf{C}$ be a {\em site}, i.e. a category given with a pretopology.
	Let $F \in \mathsf{PSh}(\mathsf{C})$, we say that
\begin{enumerate}
	\item $F$ is {\em separated} iff, given a covering $\left\{ U_{ i } \to U \right\}_{ i \in I }$
		and two sections $a,b \in F(U)$ whose pullbacks to each $F(U_i)$ coincide,
		then $a = b$;
	\item $F$ is a {\em sheaf} iff it satisfies the following condition.
		Consider any $U \in \mathsf{C}$, any covering $\left\{ U_{ i } \to U \right\}_{ i \in I }$
		of $U$ in $\mathsf{C}$ and any family $\left\{ a_i \right\}_{i \in I}$ s.t.
		$a_i \in F(U_i)$.
		Denote by 
		\begin{equation*}
		\mathrm{pr}^{i_1,i_2}_k\colon U_{i_1} \cross_{ U } U_{i_2} \to U_{i_k}
		\end{equation*} 
		the projection on the $k$-th component.
		Assume that $(\mathrm{pr}^{i,j}_1)^* a_i = 
		(\mathrm{pr}^{i,j}_2)^* a_j \in F( U_i \cross_{ U } U_j )$
		for all $i, j$, then there exists a unique section $a \in F(U)$
		whose pullback to $F(U_i)$ is $a_i$ for all $i \in I$.
\end{enumerate}
	Moreover we denote by $\mathsf{Sh}(\mathsf{C})$ the full subcategory of $\mathsf{PSh}(\mathsf{C})$
	of sheaves on $\mathsf{C}$.
\end{defn}


\noindent
Notice that any {\em sheaf} on $\mathsf{C}$ is also separated.
\begin{rem}[]
	Let's give an equivalent definition of sheaf, for a presheaf
	$F$ on a site $\mathsf{C}$.
	Choose $U \in \mathsf{C}$ and a covering $\left\{ U_{ i } \to U \right\}_{ i \in I }$.
	We denote by $F \to \Pi_{i \in I} F(U_i)$ the map induced by the
	restriction morphisms $F(U) \to F(U_i)$.
	Then we define
	\begin{equation*}
	\begin{tikzcd}[row sep = 0ex
		,/tikz/column 1/.append style={anchor=base east}
		,/tikz/column 2/.append style={anchor=base west}]
		\mathrm{pr}_1^*\colon \prod_{i \in I} F(U_i) \arrow[r, "", rightarrow] &
		\prod_{i,j \in I \cross I} F( U_i \cross_{ U } U_j )
	\end{tikzcd}
	\end{equation*} 
	as the map sending $(a_i) \in \Pi_i F(U_i)$ to
	$\mathrm{pr}_1^*(a_i) \in \Pi_{i,j} F( U_i \cross_{ U } U_j )$,
	whose component in $F( U_i \cross_{ U } U_j )$ is given by $\mathrm{pr}_1^{i,j*}(a_i)$,
	where $\mathrm{pr}^{i,j}_1\colon U_i \cross_{ U } U_j \to U_i$ is the projection on the first
	component.
	Analogously we define a morphism $\mathrm{pr}_2^*\colon \Pi_i F(U_i) \to 
	\Pi_{i,j} F( U_i \cross_{ U } U_j )$.
	Then the presheaf $F$ is a sheaf iff, for all $U \in \mathsf{C}$ and all coverings
	$\left\{ U_{ i } \to U \right\}_{ i \in I }$ in $\mathsf{C}$,
	the following diagram is an equalizer:
	\begin{equation*}
	\begin{tikzcd}
		0 \arrow[r, "", rightarrow] &
		F(U) \arrow[r, "", rightarrow] &
		\prod_{i \in I} F(U_i) 
		\arrow[r, "\mathrm{pr}_1^*", rightarrow, shift left = 0.5ex] 
		\arrow[r, "\mathrm{pr}_2^*"', rightarrow, shift right = 0.5ex] &
		\prod_{i,j \in I \cross I} F( U_i \cross_{ U } U_j )
	.\end{tikzcd}
	\end{equation*}
\end{rem}


\noindent
Before stating the main result of this section, let's notice
a simple fact:
\begin{rem}[]
	If $\tau'$ is subordinate to $\tau$, as pretopologies on $\mathsf{C}$,
	then any sheaf in $\tau$ is also a sheaf in $\tau'$.
	As a consequence, for $\mathsf{C} = \mathsf{Sch}/S$ for some scheme $S$,
	any sheaf in {\em fpqc} is also a sheaf in {\em fppf}, étale and Zariski topologies.
\end{rem}


\noindent
Finally we can state a very important result due to Grothendieck:
\begin{thm}[{\cite[\S 2.3.6]{Vistoli}}, Grothendieck]\label{thm:reprFctSheaf}
	A representable functor on $\mathsf{Sch}/S$ is a sheaf in the {\em fpqc} topology.
	In particular it is also a sheaf in the étale and {\em fppf} topologies.
\end{thm}



\subsection{Morphisms of topoi}
The main objects of our future studies will be sheaves on
$\mathsf{Sch}/S$ taken with the fppf topology.
Since we will often be concerned with base change, i.e. pullbacks,
of sheaves, we devote this section to define this concept.
Essentially we want to generalize the construction
of fibered product in the representable case.


\begin{defn}[Topoi]
	Let $\mathsf{C}$ be a site.
	The associated {\em topos} to $\mathsf{C}$ is the category $\mathsf{Sh}\left(\mathsf{C}\right)$
	of sheaves on $\mathsf{C}$.
	A morphism of topoi $f$ from $\mathsf{Sh}\left(\mathsf{D}\right)$
	to $\mathsf{Sh}\left(\mathsf{C}\right)$ is the data of a pair
	of functors $f_*\colon \mathsf{Sh}\left(\mathsf{D}\right) \to \mathsf{Sh}\left(\mathsf{C}\right)$
	and $f^*\colon \mathsf{Sh}\left(\mathsf{C}\right) \to \mathsf{Sh}\left(\mathsf{D}\right)$
	such that, bifunctorially we have
	\begin{equation*}
		\mathrm{Hom}_{\mathsf{Sh}(\mathsf{D})} \left( f^*G, F \right) \simeq
		\mathrm{Hom}_{\mathsf{Sh}(\mathsf{C})} \left( G, f_*F \right) 
	\end{equation*}
	and the functor $f^*$ commutes with finite limits, i.e. it
	is left exact.
	Moreover, given sites $\mathsf{C}, \mathsf{D}$ and $\mathsf{E}$
	and morphism of topoi 
	$f\colon \mathsf{Sh}\left(\mathsf{D}\right) \to \mathsf{Sh}\left(\mathsf{C}\right)$ and
	$g\colon \mathsf{Sh}\left(\mathsf{E}\right) \to \mathsf{Sh}\left(\mathsf{D}\right)$,
	we can define their composition $f \circ g$
	as the pair of morphisms $\left( f \circ g \right)_* \coloneqq f_* \circ g_*$
	and $\left( f \circ g \right)^* \coloneqq g^* \circ f^*$.
\end{defn}


\begin{defn}[Category over an object]
	Consider $\mathsf{C}$ a category and $U \in \mathsf{C}$ an object.
	The {\em category of objects over $U$}, denoted by $\mathsf{C}/U$
	or $\mathsf{C}_U$, is the category whose objects are morphisms
	$Y \to U$ in $\mathsf{C}$ and morphisms are morphisms $Y \to Y'$
	in $\mathsf{C}$ such that the following diagram commutes
	\begin{equation*}
	\begin{tikzcd}[column sep=1.2em]
		Y \arrow[rr, "", rightarrow] 
		\arrow[rd, "", rightarrow] & &
		Y' \arrow[ld, "", rightarrow] \\
		&
		U
	.\end{tikzcd}
	\end{equation*}
\end{defn}


\begin{rem}[]
	If $\mathsf{C}$ is also a site we turn $\mathsf{C}/U$ into a site
	by defining the coverings of $\mathsf{C}/U$ to be families
	of morphisms $\left\{ V_{ i } \to V \right\}_{ i \in I }$
	that, viewed as families in $\mathsf{C}$, are coverings for the
	pretopology on $\mathsf{C}$.

	Moreover there is a forgetful functor $f_U\colon \mathsf{C}/U \to \mathsf{C}$
	that simply forgets about the morphism.
	Finally, given a morphism $f\colon U \to V$ there is an induced
	functor $F\colon \mathsf{C}/U \to \mathsf{C}/V$ given
	by the composition with $f$, and $p_V = F \circ p_V$.
\end{rem}


\begin{lem}[{\cite[\href{https://stacks.math.columbia.edu/tag/00XZ}{Section 00XZ}]{SP}}]
	Given a site $\mathsf{C}$ and $U \in \mathsf{C}$, the forgetful functor
	$j_U\colon \mathsf{C}/U \to \mathsf{C}$ induces a
	morphism of topoi
	\begin{equation*}
	\begin{tikzcd}[row sep = 0ex
		,/tikz/column 1/.append style={anchor=base east}
		,/tikz/column 2/.append style={anchor=base west}]
		j_U\colon 
		\mathsf{Sh}\left(\mathsf{C}/U\right)\arrow[r, "", rightarrow] &
		\mathsf{Sh}\left(\mathsf{C}\right)
	.\end{tikzcd}
	\end{equation*} 
	given by the functors $j_U^*$ and ${j_U}_*$.
\end{lem} 


\begin{defn}[Localization]\label{defn:localizationTopoi}
	Let $\mathsf{C}$ be a site and $U \in \mathsf{C}$.
\begin{enumerate}
	\item We call the site $\mathsf{C}/U$ the {\em localization}
		of the site $\mathsf{C}$ at the object $U$.
	\item The morphism of topoi 
		$j_U\colon \mathsf{Sh}\left(\mathsf{C}/U\right) \to \mathsf{Sh}\left(\mathsf{C}\right)$
		is called the {\em localization morphism}.
	\item The functor ${j_U}_*$ is called the direct image functor.
	\item Taken any sheaf $F \in \mathsf{Sh}\left(\mathsf{C}\right)$,
		its image $j_U^*$ is called the {\em restriction} of $F$ to $\mathsf{C}/U$.
\end{enumerate}
\end{defn}


\begin{rem}[{\cite[\href{https://stacks.math.columbia.edu/tag/00XZ}{Section 00XZ}]{SP}}]
	Let $\mathsf{C}$ and $U$ be as before.
	For all $F \in \mathsf{Sh}\left(\mathsf{C}\right)$, the value of $j_U^*F$
	is given by
	\begin{equation*}
		j_U^*F(X/U) = F(X)
	,\end{equation*}
	where $X/U$ denotes any object $X \to U \in \mathsf{C}/U$.
\end{rem}


\begin{lem}[{\cite[\href{https://stacks.math.columbia.edu/tag/03I4}{Lemma 03I4}]{SP}}]
	Let $g\colon S \to S'$ be a morphism in $\mathsf{Sch}_{  }$, viewed
	as a site with the fppf topology.
	Let $j\colon \mathsf{Sch}/S \to \mathsf{Sch}_{ S' }$ be the corresponding
	localization functor, where both categories are taken with the fppf topology.
	Then, for $F'$ a sheaf of sets on $\mathsf{Sch}_{ S' }$, we have
\begin{enumerate}
	\item $j^* F'(T/S) = F'(T/S')$ for any $T \in \mathsf{Sch}/S$,
		where $T/S'$ means that we view $T$ as an element of $\mathsf{Sch}_{ S' }$
		via $g$;
	\item if $F'$ is representable by $X' \in \mathsf{Sch}_{ S' }$,
		then $j^*F'$ is representable by $X'_S \coloneqq X' \cross_{ S' } S$.
\end{enumerate}
\end{lem} 
