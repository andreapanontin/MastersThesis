\section{Group schemes}
In this section we introduce the notion of {\em group object}
in a category, giving all of the definition in the context
of group schemes, i.e. group objects over the category of (relative) schemes.
In this context we will develop all the important tools which will play a role
later in the dissertation, starting from their application in the definition of
$p$-divisible groups.


\begin{defn}[$S$-Group scheme]
	Let $F\colon (\mathsf{Sch}/S)^{op} \to \mathsf{Gp}$ be a functor.
	Assume that $F$ is representable by $G \in \mathsf{Sch}/S$, i.e. 
	functorially in $T \in \mathsf{Sch}/S$
	\begin{equation*}
		\iota F(T) \simeq \Hom_{\mathsf{Sch}/S} \left( T, G \right)
	,\end{equation*} 
	where $\iota\colon \mathsf{Gp} \to \mathsf{Sets}$ is the forgetful functor.
	We call $G$ a {\em group scheme} over $S$
	or $S$-group scheme.
\end{defn}


\begin{rem}[$T$-points of an $S$-scheme]
	Let's recall a standard notation: let $T \in \mathsf{Sch}/S$, one defines
	the {\em $T$-points} of $G \in \mathsf{Sch}/S$ as
	\begin{equation*}
		G(T) \coloneqq \Hom_{\mathsf{Sch}/S} \left( T, G \right)
	.\end{equation*} 
	If we view $G$, by \cref{thm:reprFctSheaf}, as an {\em fppf} sheaf on $\mathsf{Sch}/S$, instead,
	we will use the notation
	\begin{equation*}
		\Gamma \left( T, G \right) \coloneqq G(T)
	\end{equation*}
	for the sections of $G$ on $T$.
	If, in particular, $G$ is a {\em group scheme} then, by definition,
	$G(T) = \Gamma(T,G)$ is endowed with group structure for every $T \in \mathsf{Sch}/S$.
\end{rem}


\begin{rem}[]
	By definition, an abstract group is a set $G \in \mathsf{Sets}$, endowed with an operation,
	an inverse map and an identity element satisfying the usual properties.
	These can be rewritten in terms of commutative diagrams.
	At first one writes the above as the following maps:
	\begin{equation*}
	\begin{tikzcd}[row sep = 0ex
         ,/tikz/column 1/.append style={anchor=base east}
         ,/tikz/column 2/.append style={anchor=base west}
         ,/tikz/column 3/.append style={anchor=base east}]
			m\colon G \times G \arrow[r, "", rightarrow] &
			G & \text{(multiplication)} \\
			\mathrm{inv}\colon G \arrow[r, "", rightarrow] &
			G & \text{(inverse)} \\
			\varepsilon \colon \left\{ e \right\} \arrow[r, "", rightarrow] &
			G & \text{(unit),}
		\end{tikzcd}
	\end{equation*} 
	where $\left\{ e \right\}$ is the terminal object in $\mathsf{Gp}$.
	Let's write $\pi\colon G \to \left\{ e \right\}$
	as the unique arrow to the terminal object of $\mathsf{Gp}$
	and $\Delta\colon G \to G \times G$ the diagonal morphism.
	Then the group axioms are equivalent to
	\begin{align}\label{eq:GroupAxioms}
		m \circ (\id_{ G } \times m) &= m \circ (m \times \id_{ G }),\nonumber\\
		m \circ (\id_{ G } \times \mathrm{inv}) \circ \Delta &=
		m \circ (\mathrm{inv} \times \id_{ G }) \circ \Delta = \varepsilon \circ \pi,\\
		m \circ (\varepsilon \times \id_{ G }) &=
		m \circ (\id_{ G } \times \varepsilon) = \id_{ G }\nonumber
	.\end{align} 
	Notice that in this last equality we implicitly use the isomorphisms
	$\left\{ e \right\} \times G \simeq G \simeq G \times \left\{ e \right\}$.
\end{rem}


\begin{rem}[]\label{rem:StructuralMorphisms}
	Given a group scheme $G \in \mathsf{Sch}/S$, Yoneda's lemma allows to translate
	the group structure of $G(T)$, for all $T \in \mathsf{Sch}/S$, into a group structure on $G$.
	In fact, since the universal property of
	fibered product gives $\left( G \times_{ S } G \right)(T) = G(T) \times G(T)$,
	one obtains that there exist unique maps
	\begin{equation*}
			\begin{tikzcd}[row sep = 0ex
         ,/tikz/column 1/.append style={anchor=base east}
         ,/tikz/column 2/.append style={anchor=base west}
         ,/tikz/column 3/.append style={anchor=base east}]
			m\colon G \times_{ S } G \arrow[r, "", rightarrow] &
			G & \text{(multiplication)} \\
			\phantom{\times_S} \mathrm{inv}\colon G \arrow[r, "", rightarrow] &
			G & \text{(inverse)} \\
			\varepsilon \colon S \arrow[r, "", rightarrow] &
			G & \text{(unit)} 
		\end{tikzcd}
	\end{equation*} 
	inducing the group structure on $G(T)$ via Yoneda embedding.
	Then, again by Yoneda's lemma, also the above maps have to
	satisfy the properties written in 
	\cref{eq:GroupAxioms}.
	More explicitly:
	\begin{enumerate}
		\item Associativity of the product
			\begin{equation*}
			\begin{tikzcd}[column sep=4.5em]
				G \times_{ S } G \times_{ S } G 
				\arrow[r, "\id_{ G } \times_S m", rightarrow] 
				\arrow[d, "m \times_S \id_{ G }"', rightarrow] &
				G \times_{ S } G \arrow[d, "m", rightarrow] \\
				G \times_{ S } G \arrow[r, "m"', rightarrow] &
				G.
			\end{tikzcd}
			\end{equation*} 
		\item Inverse morphism 
			\begin{equation*}
			\begin{tikzcd}[column sep=2.7em]
				G \times_{ S } G
				\arrow[rr, "\id_{ G } \times_S \mathrm{inv}", rightarrow] & &
				G \times_{ S } G \arrow[d, "m", rightarrow] \\
				G \arrow[u, "\Delta", rightarrow] 
				\arrow[r, "\pi", rightarrow] &
				S \arrow[r, "\varepsilon", rightarrow] & 
				G
			\end{tikzcd}
			\qquad
			\begin{tikzcd}[column sep=2.7em]
				G \times_{ S } G
				\arrow[rr, "\mathrm{inv} \times_S \id_{ G }", rightarrow] & &
				G \times_{ S } G \arrow[d, "m", rightarrow] \\
				G \arrow[u, "\Delta", rightarrow] 
				\arrow[r, "\pi", rightarrow] &
				S \arrow[r, "\varepsilon", rightarrow] & 
				G
			\end{tikzcd}
			\end{equation*} 
		\item Identity element (again, as with groups, in the following diagrams
			we use the isomorphisms
			$S \times_{ S } G \simeq G \simeq G \times_{ S } S$)
			\begin{equation*}
			\begin{tikzcd}
				G \times_{ S } G \arrow[r, "m", rightarrow] &
				G \\
				S \times_{ S } G \arrow[r, "\sim", rightarrow] 
				\arrow[u, "\varepsilon \times_S \id_{ G }", rightarrow] &
				G \arrow[u, "\id_{ G }"', rightarrow] 
			\end{tikzcd}
			\qquad
			\begin{tikzcd}
				G \times_{ S } G \arrow[r, "m", rightarrow] &
				G \\
				G \times_{ S } S \arrow[r, "\sim", rightarrow] 
				\arrow[u, "\id_{ G } \times_S \varepsilon", rightarrow] &
				G. \arrow[u, "\id_{ G }"', rightarrow] 
			\end{tikzcd}
			\end{equation*} 
	\end{enumerate}
\end{rem}


\begin{defn}[Commutative $S$-group scheme]
	We say that a group scheme $G \in \mathsf{Sch}/S$ is {\em commutative}
	iff $G(T)$ is an abelian group for all $T \in \mathsf{Sch}/S$.
	Using Yoneda lemma as before,
	this is equivalent to asking that the following diagram commutes
	\begin{equation*}
	\begin{tikzcd}
		G \times_S G \arrow[rr, "{ \left(\mathrm{pr}_2, \mathrm{pr}_1\right)}", rightarrow] 
		\arrow[rd, "m"', rightarrow] & &
		G \times_{ S } G
		\arrow[ld, "m", rightarrow] \\
					     &
		G
	.\end{tikzcd}
	\end{equation*}
\end{defn}


\begin{rem}\label{rem:groupObject}
	One can generalize the definition of group object, from the category
	of $S$-schemes, to any category $\mathsf{C}$ admitting finite products
	(hence with final object given by the empty product) in the same manner as above.
	In fact, being $S$ the final object in $\mathsf{Sch}/S$, one sees
	that fibered products over $S$ (seen in the category of schemes)
	are just products in $\mathsf{Sch}/S$.
\end{rem}


\begin{defn}[Morphism of group schemes]
	Let $G, G'$ be group schemes, a {\em homomorphism of group schemes}
	\begin{equation*}
		\begin{tikzcd}
			\alpha\colon G \arrow[r, "", rightarrow] &
			G'
		\end{tikzcd}
	\end{equation*} 
	is a morphism $G \to G'$ in $\mathsf{Sch}/S$ such that, for all
	$T \in \mathsf{Sch}/S$, the corresponding morphism at the level of $T$-points
	is a group homomorphism
	\begin{equation*}
	\begin{tikzcd}[row sep = 0ex
		,/tikz/column 1/.append style={anchor=base east}
		,/tikz/column 2/.append style={anchor=base west}]
		\alpha(T)\colon G(T) \arrow[r, "", rightarrow] &
		G'(T) \\
		g \arrow[r, "", mapsto] & \alpha \circ g.
	\end{tikzcd}
	\end{equation*} 
	Notice that the identity of a group scheme is clearly a homomorphism of group
	schemes and compositions of group schemes homomorphisms are still
	group scheme homomorphisms.
\end{defn}


\begin{rem}
	Let $G, G'$ be group schemes, representing the functors $F,F'$.
	Then, by Yoneda's lemma, giving a homomorphism $\alpha\colon G \to G'$
	is equivalent to giving a morphism between the functors they represent.

	Again by Yoneda's lemma, one sees that a morphism $\alpha\colon G \to G'$
	in $\mathsf{Sch}/S$ is a morphism of group schemes iff
	it preserves products, i.e. iff
	\begin{equation*}
		\alpha \circ m = m' \circ (\alpha, \alpha)
	,\end{equation*} 
	for $m, m'$ the product morphisms of $G$ and $G'$ respectively.
\end{rem}


\begin{defn}[Category of $S$-group schemes]\label{defn:CatOfGroupSchemes}
	Hence, combining all of the definitions so far, 
	one can define the subcategory $\mathsf{Gp}/S$ of $\mathsf{Sch}/S$,
	of {\em $S$-group schemes}, or more simply {\em $S$-groups},
	whose objects are $S$-group schemes
	and morphisms are homomorphisms of $S$-group schemes.
\end{defn}


\begin{rem}[Kernels and cokernels]
	As with any category, one defines kernels and cokernels 
	in $\mathsf{Gp}/S$ via the usual universal properties.

	With regards to kernels, one can use the general construction 
	in a category with zero object,
	since for a morphism $\alpha\colon G \to G'$ its kernel
	is just the fibered product of $G$ and $0$ over $G'$, i.e.
	\begin{equation*}
		\ker \alpha =
		\varprojlim \Bigg(
			\begin{tikzcd}[row sep=0.60em, column sep=1.2em]
			&
			0 \arrow[d, "", rightarrow] \\
			G \arrow[r, "\alpha", rightarrow] &
			G'
		\end{tikzcd} \Bigg)
		= G \times_{G'} 0
	.\end{equation*}
	In the case of $\mathsf{Sch}/S$ we can construct fibered products.
	In particular we have the zero object $S$, with unique morphism
	$S \to G'$ given by the unit morphism of $G'$.
	Then the following gives rise to a kernel for $\alpha$
	\begin{equation*}
	\begin{tikzcd}
		G \times_{ G' } S \arrow[r, "i", rightarrow] &
		G,
	\end{tikzcd}
	\end{equation*} 
	where $i$ is the projection on the first factor.
	Hence kernels exist in $\mathsf{Gp}/S$.
	
	When it comes to cokernels, instead, one finds difficulties, much like
	with sheaves of abelian groups.
	In fact, given a morphism $\alpha\colon G \to G'$, one cannot always find an
	object $H \in \mathsf{Gp}/S$ representing the functor
	\begin{equation*}
	\begin{tikzcd}
		T \arrow[r, "", mapsto] &
		\coker (\alpha_T) =
		G(T)/G'(T).
	\end{tikzcd}
	\end{equation*}
\end{rem}



\subsection{Affine group schemes}
The above definitions have a dual interpretation in the affine case,
which is the main topic of this section.
Moreover, in the rest of the discussion, we will mostly be concerned by
affine group scheme, hence the choice to dedicate a whole section to them.
Many of the following results, though, are still valid in a more general setting.

Then, for most of the following section, then, we will fix an affine scheme
$S = \spec(R)$, and focus on affine $S$-groups.


\begin{rem}[]
If we consider $G = \spec(A)$ affine, 
the arrow-reversing equivalence of categories between
affine $R$-schemes and commutative $R$-algebras, 
allows us to translate the structural morphisms
of schemes defined in \cref{rem:StructuralMorphisms} into
appropriate $R$-algebra morphisms.
Then the properties defined by the diagrams in \cref{rem:StructuralMorphisms}
will translate into properties for these new morphisms.

Recall that the structural morphism $\pi\colon G \to S$ corresponds to a
morphism $R \to A$ making $A$ into an $R$-algebra.
Moreover the diagonal morphism $\Delta\colon G \to G \times_{ S } G$ corresponds
to the multiplication morphism of the $R$-algebra $A$:
\begin{equation*}
\begin{tikzcd}[row sep = 0ex
	,/tikz/column 1/.append style={anchor=base east}
	,/tikz/column 2/.append style={anchor=base west}]
	\widetilde{\Delta}\colon A \otimes_R A \arrow[r, "", rightarrow] &
	A \\
	a \otimes b \arrow[r, "", mapsto] & a \cdot b
.\end{tikzcd}
\end{equation*} 
With this in mind we obtain the following $R$-algebra morphisms:
\begin{equation*}
		\begin{tikzcd}[row sep = 0ex
 ,/tikz/column 1/.append style={anchor=base east}
 ,/tikz/column 2/.append style={anchor=base west}
 ,/tikz/column 3/.append style={anchor=base east}]
		\widetilde{m}\colon A \arrow[r, "", rightarrow] &
		A \otimes_R A & \text{(comultiplication)} \\
		\widetilde{\mathrm{inv}}\colon A \arrow[r, "", rightarrow] &
		A \phantom{\otimes_R}& \text{(antipode)} \\
		\widetilde{\varepsilon} \colon A \arrow[r, "", rightarrow] &
		R & \text{(counit/augmentation),}
	\end{tikzcd}
\end{equation*} 
satisfying the duals of the diagrams in \cref{rem:StructuralMorphisms}.
\end{rem}


\begin{defn}[Hopf algebras]\label{defn:HopfAlgebra}
	An {\em Hopf algebra over $R$} is an $R$-algebra $A$,
	endowed with a comultiplication, a couint and an antipode map,
	respectively:
	\begin{equation*}
			\begin{tikzcd}[row sep = 0ex
         ,/tikz/column 1/.append style={anchor=base east}
         ,/tikz/column 2/.append style={anchor=base west}
         ,/tikz/column 3/.append style={anchor=base east}]
			\widetilde{m}\colon A \arrow[r, "", rightarrow] &
			A \otimes_R A \\
			\widetilde{\mathrm{inv}}\colon A \arrow[r, "", rightarrow] &
			A \phantom{\otimes_R} \\
			\widetilde{\varepsilon} \colon A \arrow[r, "", rightarrow] &
			R,
		\end{tikzcd}
	\end{equation*} 
	satisfying the conditions obtained by dualizing those
	of \cref{rem:StructuralMorphisms}, more explicitly:
	\begin{align*}
		( \widetilde{m} \otimes_R \id_{ A } ) \circ \widetilde{m} &=
		( \id_{ A } \otimes_R \widetilde{m} ) \circ \widetilde{m},\\
		( \id_{ A } \otimes_R \widetilde{\varepsilon} ) \circ \widetilde{m} &=
		( \widetilde{\varepsilon} \otimes_R \id_{ A } ) \circ \widetilde{m} =
		\id_{ A },\\
		\widetilde{\Delta} \circ ( \id_{ A } \otimes_R \widetilde{\mathrm{inv}} ) 
		\circ \widetilde{m} &=
		\widetilde{\Delta} \circ ( \widetilde{\mathrm{inv}} \otimes_R \id_{ A } ) 
		\circ \widetilde{m} =
		(R \to A) \circ \widetilde{\varepsilon}
	.\end{align*} 
	Moreover one defines a morphism of Hopf algebras to be an $R$-algebra
	morphism preserving the comultiplication morphism.
	Finally we call $I \coloneqq \ker \widetilde{\varepsilon}$ the 
	{\em augmentation ideal} of $A$.
\end{defn}


\begin{rem}[]
	Dualizing the result for groups, one can see that a Hopf algebra
	homomorphism preserves not only comultiplication, but also
	counit and antipode morphisms.
\end{rem}


\begin{rem}[Equivalence of categories]
	Clearly, then, any Hopf algebra over $R$ gives rise
	to an affine $R$-group via the aforementioned equivalence of categories.
	This is actually an anti-equivalence of categories between affine
	$R$-group schemes and Hopf algebras over $R$.
	In fact	the multiplication morphism in a group scheme
	corresponds to the comultiplication morphism in its 
	associated Hopf algebra, and morphisms in the two categories are defined
	to preserve such operation.
\end{rem}


\begin{defn}[Augmentation ideal]
	For a Hopf algebra $A$ over $R$,
	the structure morphism $R \to A$
	splits the following short exact sequence
	\begin{equation*}
	\begin{tikzcd}
		0 \arrow[r, "", rightarrow] &
		I \arrow[r, "", rightarrow] &
		A \arrow[r, "\widetilde{\varepsilon}", rightarrow] &
		R \arrow[r, "", rightarrow] &
		0.
	\end{tikzcd}
	\end{equation*}
	Hence we have $A = R \cdot 1 \oplus I$,
	from which we deduce that $A \otimes A = R \oplus \left( I \otimes 1 \right) \oplus
	\left( 1 \otimes I \right) \oplus \left( I \otimes I \right)$.
	Finally it is easy to show that, for all $f \in I$,
	\begin{equation*}
		\widetilde{m}(f) - f \otimes 1 - 1 \otimes f \in I \otimes I
	.\end{equation*} 
\end{defn}


\noindent
The following results are valid in a more general setting, so let's change
the assumption for $S$: we will assume it is a locally Noetherian scheme.
\begin{rem}[Finite $S$-scheme]\label{rem:finiteGSMotivation}
	An $S$-scheme $G$ is finite and flat over $S$ iff its sheaf of regular functions
	$\mathcal{O}_G$ is locally free of finite rank as an $\mathcal{O}_S$-module.
	More explicitly this means that there exists a cover of $S$ by affine open subschemes
	on each of which the restriction of the structure morphism is of the form
	$\spec(A) \to \spec(R)$, for $A$ a free $R$-module of finite rank over $R$. 
	This is going to be our main interest in what follows.

	It is also true that finite flat schemes over affine schemes
	are themselves affine. 
	We are going to be interested in the case of $S = \spec(R)$,
	for $R$ the ring of integers of a local field,
	and $G$ finite flat over $S$.
	In particular $S$ and $G$ will be Noetherian schemes
	and $G$, being finite flat over $S$, is just $\spec(A)$,
	for a finite projective $R$-module $A$ (see, for instance, 
	\cite[\href{https://stacks.math.columbia.edu/tag/00NX}{Lemma 00NX}]{SP}).
\end{rem}


\begin{defn}[Order of a finite flat $S$-scheme]
	Given a finite flat $S$-scheme $G$, the rank of $\mathcal{O}_X$ as
	an $\mathcal{O}_S$-module is a locally constant function with respect
	to the Zariski topology, with integer values.
	We call such a function the order of $G$ over $S$ and denote it by $[G:S]$.
	Moreover we will use the notation $[G:S] = n$ to state that $G$ is finite flat of
	constant rank $n$ over $S$.
\end{defn}


\begin{prop}[{\cite[\S 3]{TateMF}}]\leavevmode\vspace{-.2\baselineskip}
\begin{enumerate}
	\item Consider the morphisms of schemes $X \to Y \to S$, with $[X:Y] = m$.
		Then $X$ is finite and flat over $S$ iff $Y$ is, in which case
		$[X:S] = [X:Y] [Y:S]$ as functions on $Y$.
		
	\item If $[X_i:S] = n_i$ for $i=1,2$, then
		$[X_1 \times_{ S } X_2 : S] = n_1n_2$.

	\item If $[X:S] = n$, then $[X \times_{ S } T : T] = n$
		for all $T \in \mathsf{Sch}_{ T }$.
\end{enumerate}
\end{prop}


\subsection{Examples}
In order to compute a few useful examples, let's explicit the relation between
multiplication in an $S$-group and comultiplication in its associated Hopf algebra over
$R$, for $S = \spec(R)$.
\begin{rem}\label{rem:ExplicitComult}
	Yoneda tells us that the multiplication map 
	$m\colon G \times G \to G$ can be expressed
	as the product $\mathrm{pr}_1 \mathrm{pr}_2$
	of the two projection morphisms, using the group law
	on $G(G \times G)$.
	Then, in the case of affine schemes $S = \spec(R)$
	and $G = \spec(A)$, one can translate the above to the corresponding
	Hopf algebra morphism, using the equivalence of categories.
	More explicitly one can describe the comultiplication map
	$\widetilde{m}$ as the product in 
	$\Hom_{R\text{-}\mathsf{Alg}} \left( A, A \otimes_R A \right)$ 
	(which has the same group structure as $G(G \times G)$)
	of the embedding morphisms
	\begin{equation*}
	\begin{tikzcd}
		\widetilde{\mathrm{pr}}_1: a \arrow[r, "", mapsto] &
		a \otimes_R 1 &
		\text{and} &
		\widetilde{\mathrm{pr}}_2: a \arrow[r, "", mapsto] &
		1 \otimes_R a
	.\end{tikzcd}
	\end{equation*}
\end{rem}


\begin{ex}\label{ex:AffineGroupSchemesExamples}
	In the following examples we will denote $S \coloneqq \spec(R)$
	and $G \coloneqq \spec(A)$.\nopagebreak[4]
	\begin{enumerate}
		\item \label{ex:AdditiveGroupScheme}
		The {\em additive group scheme}, given by 
			$\mathbb{G}_a \coloneqq \spec(R[x])$.
			It is given on $R$-schemes by
			\begin{equation*}
			\begin{tikzcd}[row sep = 0ex
				,/tikz/column 1/.append style={anchor=base east}
				,/tikz/column 2/.append style={anchor=base west}]
				X \arrow[r, "", mapsto] & 
				\Gamma \left( X , \mathcal{O}_{ X } \right)
			,\end{tikzcd}
			\end{equation*} 
			in which $\Gamma \left( X , \mathcal{O}_{ X } \right)$ is viewed
			as an additive group.
			In fact	we know that
			\begin{equation*}
			\Hom_{\mathsf{Sch}/S} \left( X, \mathbb{G}_a \right) \simeq
			\Hom_{R \text{-}\mathsf{Alg}} 
			\left( R[x], \Gamma \left( X , \mathcal{O}_{ X } \right) \right) \simeq
			\Gamma \left( X , \mathcal{O}_{ X } \right)
			,\end{equation*} 
			functorially in $X$.
			The last isomorphism is determined by 
			$(x \mapsto a) \mapsto a$.
			The hom set 
			$\Hom_{R \text{-}\mathsf{Alg}} \left( R[x], A \right)$
			inherits the additive group structure from $A$, and the embeddings
			of $R[x]$ in $R[x] \otimes_R R[x]$ are given by
			\begin{equation*}
				\widetilde{\mathrm{pr}}_1(x) = x \otimes_R 1
				\qquad \text{ and } \qquad
				\widetilde{\mathrm{pr}}_2(x) = 1 \otimes_R x
			.\end{equation*} 
			Then, thanks to \cref{rem:ExplicitComult},
			we deduce that
			\begin{equation*}
				\widetilde{m}(x) =
				\left( \widetilde{\mathrm{pr}}_1(x) \right) +
				\left( \widetilde{\mathrm{pr}}_2(x) \right) =
				x \otimes_R 1 + 1 \otimes_R x
			.\end{equation*} 
			Then, from the properties of counit and antipode
			(see \cref{defn:HopfAlgebra}), one checks that 
			\begin{equation*}
				\widetilde{\varepsilon}(x) = 0
				\qquad \text{ and } \qquad
				\widetilde{\mathrm{inv}}(x) = -x
			.\end{equation*} 


		\item The {\em multiplicative group scheme} 
			$\mathbb{G}_m \coloneqq \spec(R[x,x^{-1}])$.
			It acts on $R$-schemes by
			\begin{equation*}
			\begin{tikzcd}[row sep = 0ex
				,/tikz/column 1/.append style={anchor=base east}
				,/tikz/column 2/.append style={anchor=base west}]
				X \arrow[r, "", mapsto] & 
				\Gamma \left( X , \mathcal{O}_{ X } \right)^{\times}
			,\end{tikzcd}
			\end{equation*} 
			in which $\Gamma \left( X , \mathcal{O}_{ X } \right)^{\times}$ is viewed
			as a multiplicative group.
			In fact one checks that
			\begin{equation*}
			\Hom_{\mathsf{Sch}/S} \left( X, G \right) \simeq
			\Hom_{R \text{-}\mathsf{Alg}} 
			\left( R[x, x^{-1}], \Gamma \left( X , \mathcal{O}_{ X } \right) \right) \simeq
			\Gamma \left( X , \mathcal{O}_{ X } \right)^{\times}
			,\end{equation*} 
			functorially in $X$.
			Then, reasoning as before, one obtains
			\begin{equation*}
				\widetilde{m}(x) =
				\left( \widetilde{\mathrm{pr}}_1(x) \right) \cdot
				\left( \widetilde{\mathrm{pr}}_2(x) \right) =
				(x \otimes_R 1) \cdot (1 \otimes_R x) = 
				x \otimes_R x
			.\end{equation*} 
			Finally, from the properties  of counit and antipode map
			(see \cref{defn:HopfAlgebra}) one deduces
			\begin{equation*}
				\widetilde{\varepsilon}(x) = 1
				\qquad \text{ and } \qquad
				\widetilde{\mathrm{inv}}(x) = x^{-1}
			.\end{equation*} 


		\item The {\em general linear group scheme} $\mathrm{GL}_n \coloneqq 
			\spec(R[\mathrm{x},\mathrm{y}]/J)$,
			where
			\begin{equation*}
				R[\mathrm{x},\mathrm{y}] \coloneqq
				R[x_{11}, x_{12}, \ldots, x_{nn},
				y_{11}, \ldots, y_{nn}]
			\end{equation*} 
			and $J$ is the ideal generated by the $n^2$ entries of the matrix
			$\left( x_{ij} \right)_{i,j=1}^n \cdot \left( y_{ij} \right)_{i,j=1}^n - I$,
			for $I$ the identity matrix.
			It acts on $R$-schemes by associating to
			$X \in \mathsf{Sch}/S$ the multiplicative group
			$\mathrm{GL}_n(X)$ of invertible $n \times n$
			matrices with coefficients in $\Gamma \left( X , \mathcal{O}_{ X } \right)$.
			Let's recall that, in $\mathrm{GL}_n(X)$, the product
			$\left( x_{i,j} \right)_{i,j = 1}^n \cdot 
			\left( y_{i,j} \right)_{i,j = 1}^n$
			is given by $\left( c_{i,j} \right)_{i,j = 1}^n$, where
			\begin{equation*}
			c_{i,j} = \sum_{l=1}^{n} x_{i,l} \cdot y_{l,j}
			.\end{equation*} 
			Then, reasoning as before, we can explicitly write the Hopf algebra maps.
			Indeed they are
			\begin{equation*}
				\widetilde{m}(x_{i,j})_{i,j=1}^n = \sum_{l=1}^{n} x_{i,l} \otimes_R x_{l,j},
				\quad
				\widetilde{\varepsilon}(x_{i,j})_{i,j=1}^n = 1,
				\quad
				\widetilde{\mathrm{inv}}(x_{i,j})_{i,j=1}^n = (y_{i,j})_{i,j=1}^n
			,\end{equation*} 
			where $\left( y_{i,j} \right)_{i,j}$ satisfies 
			$\left( x_{ij} \right)_{i,j=1}^n \cdot \left( y_{ij} \right)_{i,j=1}^n = I$.


		\item The {\em group scheme of $n$th roots of unity}, denoted by $\mu_n$.
			It is defined to be the kernel of the $n$th power morphism
			$\mathbb{G}_m \to \mathbb{G}_m$,
			corresponding to the $R$-algebra morphism
			$\mu\colon x \mapsto x^n$.
			Then $\mu_n$ is represented by $\spec(\coker \mu)$,
			and the morphism $\mu_n \hookrightarrow \mathbb{G}_m$ is given by the projection
			\begin{equation*}
			\begin{tikzcd}
				R[x,x^{-1}] \arrow[r, "", twoheadrightarrow] &
				R[x,x^{-1}] / (x^n - 1)
			,\end{tikzcd}
			\end{equation*}
			which is surjective, making $\mu_n$
			a closed subgroup scheme of $\mathbb{G}_m$.
			We can also see that 
			$\mu_n$ is a finite and flat $S$-group scheme, 
			since $R[x,x^{-1}] / (x^n-1)$ is finite and flat over $R$.


		\item The {\em diagonalizable group schemes}. Let $X$ be an ordinary
			commutative group, and denote by $R[X] \coloneqq \bigoplus_{x \in X} Rx$
			its associated group $R$-algebra.
			This is a Hopf algebra, whose structural morphisms
			are given, for every $x \in X$, by
			\begin{equation*}
				\widetilde{m}(x) = x \otimes x,
				\quad
				\widetilde{\varepsilon}(x) = 1,
				\quad
				\widetilde{\mathrm{inv}}(x) = x^{-1}
			.\end{equation*} 
			The above can be checked directly, since we have
			the identifications, for $G = \spec(A)$:
			\begin{equation*}
				\left( D(X) \right)(G) \coloneqq
				\Hom_{R \text{-Alg}} \left( R[X], A \right) \simeq
				\Hom_{\mathsf{Ab}} \left( X, A^{\times} \right)
			,\end{equation*} 
			where the last hom set has a natural structure of abelian
			group.
			Then we define the {\em diagonalizable group scheme} $D(X)$
			as the commutative $R$-group $\spec(R[X])$.

			Two important cases are $\mathbb{G}_m \simeq D(\mathbb{Z})$
			and $\mu_n \simeq D(\mathbb{Z}/n\mathbb{Z})$.
			Moreover, if $X$ is finite, $R[X]$ is a free $R$-module of rank $n$,
			making $D(X)$ commutative, finite and flat over $R$.
			More generally, for $X$ finitely generated, 
			from the structure theorem for finitely generated abelian groups, 
			$X$ is isomorphic to a finite product of cyclic groups.
			Hence $D(X)$ is a finite product of copies of $\mathbb{G}_m$
			and $\mu_n$, for various $n$.
			It is then a closed subgroup scheme of $\mathbb{G}_m^r$, for some $r$,
			which again can be seen as the closed subgroup scheme of diagonal
			matrices of $\mathrm{GL}_r$, explaining the name 
			{\em diagonalizable}.


		\item The {\em constant group scheme}\label{ex:ConstantGroups}.
			Let $R$ be a ring and $\Gamma$ an ordinary, finite commutative group.
			We define $A$ to be the $R$-algebra $R^\Gamma$,
			of functions from $\Gamma$ to $R$.
			A basis for $A$ is given by $\left\{ e_\sigma \right\}_{\sigma \in \Gamma}$,
			for $e_\sigma(\gamma) = \delta_{\gamma,\sigma}$,
			where $\delta$ is Kronecker's delta function.
			Defining the following Hopf algebra structure
			we see that $A$ represents an $S$-group scheme,
			called the constant group scheme for $\Gamma$,
			which we denote by $\underline{\Gamma}$.
			\begin{equation*}
				\widetilde{m}(e_\rho) \coloneqq
				\sum_{\gamma\tau = \rho}^{} e_\sigma \otimes e_\tau, 
				\quad
				\widetilde{\mathrm{inv}}(e_\sigma) \coloneqq e_{\sigma^{-1}}, 
				\quad
				\widetilde{\varepsilon}(e_\sigma) \coloneqq
				\begin{cases}
					1 & \text{if } \sigma = 1 \in \Gamma\\
					0 & \text{otherwise}.
				\end{cases}
			\end{equation*}


		\item The {\em group scheme of $p^r$th roots of zero},
			if $\mathrm{char}\, R = p$, denoted by $\alpha_{p^r}$. 
			It is defined to be the kernel of the $p^r$th power
			morphism $\mathbb{G}_a \to \mathbb{G}_a$,
			corresponding to the $R$-algebra morphism
			$\alpha\colon x \mapsto x^{p^r}$.
			Then $\alpha_{p^r}$ is represented by $\spec(\coker \alpha)$.
			Moreover this is an additive subgroup scheme, since $\mathrm{char}\, R = p$.
			As for $\mu_n$, it is a closed finite flat subgroup scheme of 
			$\mathbb{G}_a$.
	\end{enumerate}
\end{ex}


\begin{rem}[Base change]\leavevmode\vspace{-\baselineskip}
\begin{enumerate}
\item 	Let $U, T \in \mathsf{Sch}/S$ be two $S$-schemes.
	We use the notation $U_T$ for the base change $U \times_{ S } T$.
	It is important to notice that, for $V \in \mathsf{Sch}_{ T }$, we 
	have $U_T(V) = U(V)$, where in the last expression
	we considered $V$ as an $S$ scheme, by $V \to T \to S$.


\item	In particular the examples we have developed so far 
	can all be given for $\mathbb{Z}$-group schemes
	(apart from $\alpha_p$, which requires a base ring
	of characteristic $p$).
	Then we will use the notation given in the examples
	to mean the group scheme over $\mathbb{Z}$ (resp$.$ $\mathbb{F}_{p}$)
	and take their base change when working in $\mathsf{Sch}/S$
	for an appropriate $S$.
\end{enumerate}
\end{rem}


\subsection{Connected-étale sequence}
\subsubsection{Quotients and exactness}
In order to construct some important short exact sequences
we need to tackle the problem of the construction
of cokernels, hence of quotient groups.
In order to do so we have to start with the concept of group action.
Moreover we keep the assumption, from the previous section, that $S$
is a locally Noetherian scheme.

\begin{defn}[Right action]
	Let $H$ be an $S$-group scheme, and take $X \in \mathsf{Sch}/S$.
	A {\em right action} of $H$ on $X$ is a morphism
	\begin{equation*}
	\begin{tikzcd}[row sep = 0ex
		,/tikz/column 1/.append style={anchor=base east}
		,/tikz/column 2/.append style={anchor=base west}]
		a\colon X \times_{ S } H \arrow[r, "", rightarrow] &
		X
	\end{tikzcd}
	\end{equation*} 
	such that, for all $T \in \mathsf{Sch}/S$, the induced map
	$X(T) \times H(T) \to  X(T)$ is a right action of the
	group $H(T)$ on the set $X(T)$.
	We say that the action is {\em strictly free} iff the morphism
	\begin{equation*}
	\begin{tikzcd}[row sep = 0ex
		,/tikz/column 1/.append style={anchor=base east}
		,/tikz/column 2/.append style={anchor=base west}]
		(\mathrm{pr}_1, a)\colon X \times_{ S } H \arrow[r, "", rightarrow] &
		X \times_{ S } X
	\end{tikzcd}
	\end{equation*} 
	is a closed immersion.
\end{defn}


\noindent
The next theorem will allow us to construct quotients of
$S$-group schemes by finite, flat closed subgroup schemes.
It actually is a consequence of the following, more general result, due to Grothendieck.
\begin{thm}[{\cite[\S 3.4]{TateMF}}]
	Suppose that $H$, finite flat over $S$, acts strictly freely on $X$
	of finite type over $S$ in such a way that every orbit is contained in an affine open set.
	Then there exists $Y \in \mathsf{Sch}/S$ and a morphism $u\colon X \to Y$,
	constant on orbits, such that for every morphism $v\colon X \to Z$ constant on orbits,
	there is a unique morphism $f\colon Y \to Z$ such that $v = f \circ u$.
	We denote $Y$ by $X/H$, and notice that $u$ has the following properties:
\begin{enumerate}
	\item $X$ is finite flat over $X/H$ and $[X:(X/H)] = [H:S]$.
		
	\item For every $T \in \mathsf{Sch}/S$, the following map is injective
		\begin{equation*}
		\begin{tikzcd}
			X(T)/H(T) \arrow[r, "", rightarrowtail] &
			(X/H)(T)
		.\end{tikzcd}
		\end{equation*}
\end{enumerate}
\end{thm}


\noindent
As promised we obtain the following result for group schemes.
\begin{prop}[{\cite[\S 3.5]{TateMF}}]\label{thm:QuotientGroupScheme}
	Let $G$ be an $S$-group scheme and $H \subset G$ a finite flat closed
	subgroup scheme.
	Define the action $a\colon G \times_{ S } H \to G$ as the restriction of the
	group law $m$ on $G$.
	Then $G/H$ is the scheme of {\em left cosets} of $H$ in $G$.

	Assume, moreover, that $G/H$ is finite and flat over $S$,
	with order $[(G/H):S]$. We will call this the {\em index} of $H$ in $G$
	and denote it by $[G:H]$.
	Then $G$ is finite and flat over $S$ and we have
	\begin{equation*}
		[G:H][H:S] = [G:S]
	.\end{equation*} 
\end{prop}


\noindent
Finally, in order to take quotients, we need to introduce the notion
of normal subgroup:
\begin{defn}[Normal subgroup]
	Let $G$ be an $S$ group and $H$ be a subgroup scheme of $G$,
	i.e. $H$ is a subscheme of $G$ and the inclusion morphism
	is a homomorphism of group schemes.
	We say that $H$ is a {\em normal subgroup} of $G$ iff, for all $T \in \mathsf{Sch}/S$,
	the subgroup $H(T)$ of $G(T)$ is a {\em normal} subgroup.
\end{defn}


\begin{rem}[Short exact sequence]
	Assume, in the hypothesis of \cref{thm:QuotientGroupScheme}, that $H$ is
	also {\em normal} in $G$.
	Then the multiplication on $G$ induces a multiplication 
	morphism on $G/H$, making it an $S$-group scheme.
	Moreover the map $u\colon G \to G/H$ is
	an $S$-group homomorphism.
	In particular this gives rise to the short exact sequence of group schemes
	\begin{equation*}
	\begin{tikzcd}
		1 \arrow[r, "", rightarrow] &
		H \arrow[r, "i", rightarrow] &
		G \arrow[r, "u", rightarrow] &
		G/H \arrow[r, "", rightarrow] &
		1
	,\end{tikzcd}
	\end{equation*}
	where short exactness also means that $i$ is a closed immersion
	and $u$ is faithfully flat.
	Here $1$ denotes the constant $S$-group scheme $1$, as
	seen in \cref{ex:ConstantGroups} of
	\cref{ex:AffineGroupSchemesExamples}.
\end{rem}



\subsubsection{Separable algebras and étale group schemes}
The study of étale group schemes is strictly related to that of
separable algebras, so here are a few interesting results for the latter:


\begin{thm}[{\cite[\S 6.2]{Waterhouse}}]
	\label{thm:SeparableAlgebrasCharacterization}
	Let $k$ be a field and denote by $\overline{k}$ and $k^s$ respectively
	an algebraic and a separable closure of $k$.
	Let $A$ be a finite dimensional $k$-algebra.
	The following are equivalent:
\begin{enumerate}
	\item $A \otimes_k \overline{k}$ is reduced.
	\item $A \otimes_k \overline{k} \simeq \overline{k} \times \cdots \times \overline{k}$.
	\item The number of $k$-algebra homomorphisms $A \to  \overline{k}$
		equals the dimension of $A$ over $k$.
	\item $A$ is a product of separable field extensions of $k$.
	\item $A \otimes_k k^s \simeq k^s \times \cdots \times k^s$.
\end{enumerate}
If, moreover, $k$ is a perfect field, all of the above are equivalent to
\begin{enumerate}[resume]
	\item $A$ is reduced.
\end{enumerate}
\end{thm}


\begin{defn}[Separable algebra]
	A $k$-algebra $A$ satisfying the equivalent conditions of
	\cref{thm:SeparableAlgebrasCharacterization}
	is called {\em separable}.
\end{defn}


\begin{cor}[{\cite[\S 6.2]{Waterhouse}}]
	Subalgebras, quotients, products and tensor products of separable $k$-algebras
	are separable.
	Moreover, given $L/k$ a field extension, $A$ is separable over $k$
	iff $A \otimes_k L$ is separable over $L$.
\end{cor} 


\noindent
For the following definition we will not assume maximal generality, but
we will restrict to a case which includes the situation we will be concerned with,
i.e. finite schemes over a Noetherian affine base.
\begin{defn}[Unramified and étale morphism of schemes]\label{defn:EtaleMorphismSheaves}
	Let $f\colon X \to S$ be a morphism of finite type between
	locally Noetherian schemes.
\begin{enumerate}
	\item We say that $f$ is {\em unramified} at $x \in X$ iff, for $s \coloneqq f(x)$,
		the image $f^{\#}_s(\mathfrak{m}_s)$ generates
		$\mathfrak{m}_x$ in $\mathcal{O}_{ X,x }$
		and $\kappa(x)/\kappa(s)$ is a finite and separable field extension.

	\item We say that $f$ is {\em étale} at $x \in X$ iff it is
		flat and unramified at $x$.

	\item We say that $f$ is unramified (resp$.$ étale) iff it is 
		unramified (resp$.$ étale) at every point of $X$.

	\item We say that $X \in \mathsf{Sch}/S$ is unramified 
		(resp$.$ étale) iff its structure
		morphism is unramified (resp$.$ étale).
\end{enumerate}
\end{defn}


\noindent
In fact we can use this characterization in our context thanks to
\begin{lem}[{\cite[\href{https://stacks.math.columbia.edu/tag/02GL}{Lemma 02GL}]{SP}}]
	\leavevmode\vspace{-.2\baselineskip}
\begin{enumerate}
	\item A scheme $X$ is étale over a field $k$ iff $X = \spec(A)$
		for a {\em separable} $k$-algebra $A$.
	\item If $f\colon X \to S$ is an étale morphism of schemes,
		for every $s \in S$, the fiber at $s$ is given by $X_s = \spec(A_s)$,
		for a separable $\kappa(s)$-algebra $A_s$.
\end{enumerate}
\end{lem} 


\begin{lem}[{\cite[\href{https://stacks.math.columbia.edu/tag/02GM}{Lemma 02GM}]{SP}}]
	\label{FlatMorphismEtaleViaFIbers}
	Let $f\colon X \to S$ be a morphism of schemes.
	Assume, moreover, that $f$ is flat, locally of finite presentation and that,
	for all $s \in S$, the fiber $X_s \coloneqq 
	X \times_{\spec(\kappa(s))} \spec(\kappa(s))$
	is a disjoint union of finite separable extensions of $\kappa(s)$.
	Then $f$ is étale.
\end{lem} 


\noindent
Finally we want to quote an important result which
concerns finite étale group schemes over a field.
\begin{defn}[Discrete $\mathscr{G}_k$ groups]
	Let $k$ be a field and $\overline{k}$ a fixed separable closure of $k$.
	Let $\mathscr{G}_k \coloneqq \gal\left( \overline{k} / k \right)$ be the
	absolute Galois group of $k$.
	We define the category of {\em discrete $\mathscr{G}_k$ groups} as the category
	whose objects are finite groups endowed with the discrete topology and
	a continuous action of $\mathscr{G}_k$ via group homomorphisms.
	A morphism of discrete $\mathscr{G}_k$ groups is a $\mathscr{G}_k$-equivariant
	group homomorphism.
\end{defn}


\begin{thm}[{\cite[\S2.16]{MilneAG}}]\label{CharacterizationEtaleGroupSchemesK}
	The functor $G \mapsto G(\overline{k})$ is an equivalence of categories
	between the category of étale group schemes over $k$ and the
	category of discrete $\mathscr{G}_k$ groups.
\end{thm}


\begin{ex}[]\label{EtaleConstantGroupScheme}
	Important examples of étale group schemes are given by
	constant group schemes over fields.
	In fact they are represented by the spectrum of a
	finite product of copies of the base field, hence they are étale
	by \cref{thm:SeparableAlgebrasCharacterization}.
	More generally, in case the base scheme is a Noetherian discrete valuation
	ring, we can reduce to the above arguments on the two fibers 
	thanks to \cref{FlatMorphismEtaleViaFIbers} and obtain the same result.
	In fact we only need to show that the structure morphism is flat,
	which corresponds to showing that our algebra is a flat module over the 
	base ring.
	But this is the case, since as a module it is a finite product of copies
	of the base ring.
\end{ex}



\subsubsection{Connected-étale exact sequence}
In the following section we will always assume that 
$S = \spec(R)$	for a henselian local ring $R$.
We will denote by $\mathfrak{m}$ its maximal ideal, by $k \coloneqq R/\mathfrak{m}$
its residue field and by $s \coloneqq \spec(k)$ the closed point of $R$.
Finally by $G$ we will denote a finite and flat $S$-group scheme.

\begin{thm}[{\cite[\S 3.7]{TateMF}}, Connected-étale exact sequence]\label{thm:ConnectedEtaleSequenceGS}
	Let $G^0$ be the connected component of the identity in $G$.
	Then $G^0$ is the spectrum of a local $R$-algebra, with residue field $k = R/\mathfrak{m}$
	and it is a flat, closed normal subgroup scheme of $G$.
	Moreover the quotient $G^{et} \coloneqq G/G^0$,
	constructed as in \cref{thm:QuotientGroupScheme},
	is étale and gives rise to the short exact sequence
	\begin{equation*}
	\begin{tikzcd}
		1 \arrow[r, "", rightarrow] &
		G^0 \arrow[r, "", rightarrow] &
		G \arrow[r, "", rightarrow] &
		G^{et} \arrow[r, "", rightarrow] &
		1
	,\end{tikzcd}
	\end{equation*}
	called the {\em connected-étale sequence} for $G$.
	In particular it can be characterized by the fact that every homomorphism
	from $G$ to an étale $S$-group factorizes through $G \to G^{et}$,
	and $G^0$ is the kernel of that homomorphism.
\end{thm}


\begin{prop}[{\cite[\S 3.7]{TateMF}}]\label{prop:PropertiesConnectedEtale}
\leavevmode\vspace{-.2\baselineskip}
\begin{enumerate}
	\item Assume $\mathrm{char}\, k = 0$, then $G^0 = S$
		and $G = G^{et}$.
		If, instead, $\mathrm{char}\, k = p > 0$, we have
		$[G^0:S] = p^t$ for some $t$.
		As a consequence, if $[G:S]$ is invertible in $S$, then
		$G$ is étale over $S$.

	\item If $R = k$ is a field and $n = [G:S]$, then $x^n = 1$
		for all $x \in G(B)$ for any $k$-algebra $B$.
		We say that $G$ is killed by its order.

	\item If $R$ is a perfect field, then the homomorphism
		$G \to  G^{et}$ admits a section. 
		As a consequence $G = G^0 \rtimes G^{et}$
		can be expressed as a semidirect product.
\end{enumerate}
\end{prop}


\subsection{Cartier Duality}\label{CartierDualityGroups}
In this section we will mainly be concerned with $S = \spec(R)$ affine
and $G$ finite commutative over $S$, hence affine, let's say $G = \spec(A)$.


\begin{rem}[]
	In \cref{rem:finiteGSMotivation} we recalled that $A$ is a finite projective $R$-module.
	Then, still arguing by
	\cite[\href{https://stacks.math.columbia.edu/tag/00NX}{Lemma 00NX}]{SP}),
	$A$ is a finite and locally free $R$-module.
	For an $R$-module $M$ we define its dual $R$-module to be
	$M^D \coloneqq \Hom_{R} \left( M, R \right)$.
	Hence, for any locally free $R$-modules of finite rank $M$ and $N$,
	one has the natural isomorphisms
	\begin{equation*}%See Waterhouse
	\begin{tikzcd}
		M \arrow[r, "\sim", rightarrow] &
		(M^D)^D &
		\text{and} &
		M^D \otimes_R N^D \arrow[r, "\sim", rightarrow] &
		\left( M \otimes_R N \right)^D
	.\end{tikzcd}
	\end{equation*}
\end{rem}


\begin{rem}[Dual algebra]\label{rem:dualHopfStructure}
	To the $R$-algebra $A$ we can associate the $R$-module 
	\begin{equation*}
	A^D \coloneqq \Hom_{ R\text{-}\mathsf{Mod} } \left( A, R \right)
	.\end{equation*} 
	In case $A$ is given with a cocommutative Hopf algebra structure, one
	can dualize it to obtain a (cocommutative) Hopf algebra structure on $A^D$.
	In particular product and coproduct of $A$ become, respectively,
	coproduct and product of $A^D$, as
	\begin{equation*}
	\begin{tikzcd}
		(\widetilde{\Delta})^D\colon
		A^D \arrow[r, "", rightarrow] &
		A^D \otimes_R A^D &
		\text{\text{and}} &
		(\widetilde{m})^D\colon
		A^D \otimes_R A^D \arrow[r, "", rightarrow] &
		A^D 
	.\end{tikzcd}
	\end{equation*}
	More explicitly $(\widetilde{\Delta})^D$ and $(\widetilde{m})^D$ are
	the transpose maps of $\widetilde{\Delta}$ and $\widetilde{m}$ respectively,
	i.e.
	\begin{equation*}
	\begin{tikzcd}[row sep = 0ex
		,/tikz/column 1/.append style={anchor=base east}
		,/tikz/column 2/.append style={anchor=base west}]
		(\widetilde{\Delta})^D \coloneqq \Hom_{ R\text{-}\mathsf{Mod} }
		( \widetilde{\Delta}, R )
		\colon \Hom_{ R\text{-}\mathsf{Mod} } \left( A, R \right)\arrow[r, "", rightarrow] &
		\Hom_{ R\text{-}\mathsf{Mod} } \left( A \otimes_R A, R \right)\\
		f \arrow[r, "", mapsto] & f \circ \widetilde{\Delta}
	,\end{tikzcd}
	\end{equation*} 
	where, since $A$ is a finite projective $R$-module, 
	on the right hand side we have the isomorphism
	\begin{equation*}
	\Hom_{ R\text{-}\mathsf{Mod} } \left( A \otimes_R A, R \right) \simeq
	\Hom_{ R\text{-}\mathsf{Mod} } \left( A, R \right) \otimes_R
	\Hom_{ R\text{-}\mathsf{Mod} } \left( A, R \right)
	.\end{equation*}
	Analogously one constructs $(\widetilde{m})^D$.
\end{rem}


\begin{defn}[Cartier dual]
	Given a $S$ and $G$ as before, we define the {\em dual} of $G$ as the
	group scheme defined by
	\begin{equation*}
	G^D \coloneqq \spec(A^D)
	.\end{equation*}
\end{defn}


\begin{thm}[{\cite[\S 3.7]{Waterhouse}}, Cartier duality]\label{thm:CartierDuality}
	Let $G$ be a finite, commutative $R$-group scheme.
	Then the following facts hold true.
\begin{enumerate}
	\item $G^D$ is a finite commutative $S$-group scheme.
	\item $( G^D )^D \simeq G$.
	\item For all $H,G \in \mathsf{Gp}/S$ finite commutative 
	$\Hom_{\mathsf{Gp}/S} \left( G, H \right) \simeq
	\Hom_{\mathsf{Gp}/S} \left( H^D, G^D \right)$.
	\item Forming $G^D$ commutes with base change.
\end{enumerate}
\end{thm}


\begin{rem}[]\label{rem:DualityOtherProperties}
	Duals of finite commutative group schemes inherit some other properties,
	in fact $[G^D : S] = [G : S]$.
	Moreover the dual of a short exact sequence is short exact.
\end{rem}


\noindent
One can also interpret duality from a different point of view.
Here the relevant notions:
\begin{defn}[Characters of $\mathrm{S}$-groups]
	Let $G$ be an $S$-group scheme.
	A {\em character} of $G$ is a homomorphism of $S$-groups
	\begin{equation*}
	\begin{tikzcd}[row sep = 0ex
		,/tikz/column 1/.append style={anchor=base east}
		,/tikz/column 2/.append style={anchor=base west}]
		\chi\colon G \arrow[r, "", rightarrow] &
		(\mathbb{G}_m)_S
	.\end{tikzcd}
	\end{equation*} 
\end{defn}


\begin{rem}[{\cite[\S 2.4]{Waterhouse}}, Dual as hom functor]\label{rem:DualasHomFct}
	Characters form a group in the set of morphism of $S$-schemes
	between $G$ and $\mathbb{G}_{m,S}$, the base change of $\mathbb{G}_m$ to $S$
	Then one can introduce the contravariant sheaf hom functor, also called
	internal hom functor, from $\mathsf{Sch}/S$ to $\mathsf{Ab}$
	\begin{equation*}
	\begin{tikzcd}[row sep = 0ex
		,/tikz/column 1/.append style={anchor=base east}
		,/tikz/column 2/.append style={anchor=base west}]
		\mathcal{H}\mathrm{om}_{\mathsf{Gp}/S} \left( G, \mathbb{G}_{m,S} \right)\colon
		T \arrow[r, "", mapsto] & 
		\Hom_{\mathsf{Gp}/T} \left( G_T, \mathbb{G}_{m,T} \right)
	.\end{tikzcd}
	\end{equation*} 
	Then, for a finite, commutative $S$-group $G$ we have the isomorphism
	\begin{equation*}
		G^D \simeq \mathcal{H}\mathrm{om}_{\mathsf{Gp}/S} \left( G, \mathbb{G}_{m,S} \right)
	.\end{equation*} 
	This is actually one of the cases in which the above hom functor
	is representable.
\end{rem}


\noindent
Let's now give a few examples of dual group schemes among the ones we introduced so far:
\begin{ex}[]\leavevmode\vspace{-.2\baselineskip}\label{ex:GroupSchemeDuality}
\begin{enumerate}
	\item The dual algebra of $R^\Gamma$ is $R[\Gamma]$ and viceversa.
		Hence diagonalizable finite group schemes are dual to constant commutative group schemes.
		In particular this yields that $\mu_n$ is dual to $\underline{\mathbb{Z}/n\mathbb{Z}}$
		and viceversa.

	\item One can show that $\alpha_p^D \simeq \alpha_p$.
		In fact we can view $\alpha_p^D$ as the character group
		\begin{equation*}
			\Hom_{\mathsf{Gp}/S} \left( \alpha_{p,S}, \mathbb{G}_{m,S} \right)
		.\end{equation*}
		To see this we can reduce to the case where 
		$S = \spec(\mathbb{F}_p)$, where
		$\mathbb{F}_{p}$ denotes the finite field of order $p$. Then
		the result holds in general due to compatibility of the construction of
		dual group scheme with base change.
		Then, for any $\mathbb{F}_{p}$-algebra $R$, we can define the exponential map
		\begin{equation*}
		\begin{tikzcd}[row sep = 0ex
			,/tikz/column 1/.append style={anchor=base east}
			,/tikz/column 2/.append style={anchor=base west}]
			\mathrm{exp}\colon \alpha_p(R) \arrow[r, "", rightarrow] &
			\mathbb{G}_{m,\mathbb{F}_{p}} \\
			r \arrow[r, "", mapsto] & \mathrm{exp}(r) \coloneqq
			1 + r + \frac{r^2}{2!} + \cdots + \frac{r^{p-1}}{\left( p-1 \right)!}
		.\end{tikzcd}
		\end{equation*} 
		With this notation it can be shown that, for any
		$T \in \mathsf{Sch}/\mathbb{F}_{p}$, self duality is given by
		\begin{equation*}
		\begin{tikzcd}[row sep = 0ex
			,/tikz/column 1/.append style={anchor=base east}
			,/tikz/column 2/.append style={anchor=base west}]
			\alpha(T) \arrow[r, "\sim", rightarrow] &
			\Hom_{\mathsf{Gp}/\mathbb{F}_{p} }
			\left( \alpha_p, \mathbb{G}_{m,\mathbb{F}_{p}} \right) \\
			\xi \arrow[r, "", mapsto] & 
			\left( r \mapsto \mathrm{exp}(\xi \cdot r) \right)
		.\end{tikzcd}
		\end{equation*} 
\end{enumerate}
\end{ex}



\subsection{Frobenius and Verschiebung}\label{sec:FrobeniusVerschiebung}
Let's now study a few constructions in characteristic $p$:
let $R$ be a ring with $\mathrm{char}\, R = p$.
%tk: for this section please add some references (not only the course from Essen).


\begin{defn}[]
	For any $R$-algebra $A$,
	denote by $\varphi_A\colon A \to A$ the morphism
	acting by $a \mapsto a^p$.
	It induces $\spec(\varphi_A)\colon \spec(A) \to \spec(A)$,
	which is the identity at the level of topological spaces.
	This map, moreover, can be glued for any $R$-scheme $X$, giving rise to a map
	$\varphi_X\colon X \to X$ such that
\begin{enumerate}
	\item it is the identity at the level of topological spaces,
	\item for any $U \subset X$ open, it induces the $p$-power map
		as a ring homomorphism $\mathcal{O}_{X}(U) \to \mathcal{O}_{ X }(U)$.
\end{enumerate}
	We will denote by $X^{(p)}$ the fibered product
	\begin{equation}
	\begin{tikzcd}
		X^{(p)} \coloneqq X \times_{ R } \spec(R) \arrow[r, "", rightarrow] 
		\arrow[d, "", rightarrow] &
		X \arrow[d, "", rightarrow] \\
		\spec(R) \arrow[r, "\varphi_R"', rightarrow] &
		\spec(R)
	.\end{tikzcd}
	\end{equation}
	Finally we can construct the map $F_{X/R} \colon X \to X^{(p)}$,
	which we will denote simply by $F_X$ when the base scheme is clear,
	as the unique map making the following diagram commute:
	\begin{equation}
	\begin{tikzcd}[row sep=1.6em, column sep=1.8em]
		X \arrow[rrd, "\varphi_X", rightarrow, bend left] 
		\arrow[rdd, "", rightarrow, bend right, end anchor=north west]
		\arrow[rd, "F_{X/R}", dashrightarrow] & & \\
		&
		X^{(p)} \arrow[r, "", rightarrow] 
		\arrow[d, "", rightarrow] &
		X \arrow[d, "", rightarrow] \\
		&
		\spec(R) \arrow[r, "\varphi_R"', rightarrow] &
		\spec(R)
	.\end{tikzcd}
	\end{equation}
\end{defn}


%tk: for impagination purposes
\newpage
\begin{defn}[Frobenius morphism]
	For $R$ a ring of characteristic $p$, and $X$ an $R$-scheme, we define
\begin{enumerate}
	\item $\varphi_X\colon X \to X$ the {\em absolute Frobenius morphism} of $X$,
	\item $F_X \colon X \to X^{(p)}$ the {\em relative Frobenius morphism} of $X$.
\end{enumerate}
\end{defn}


\begin{rem}[]
	Notice that the relative Frobenius $F_X$ is a
	morphism of $R$-schemes, for all $X \in \mathsf{Sch}/R$.
	Instead the absolute Frobenius $\varphi_X$, in general, is not.
\end{rem}


\begin{ntt}
	Given a morphism of $R$-schemes $f\colon X \to Y$,
	we define 
	\begin{equation}
	\begin{tikzcd}[row sep = 0ex
		,/tikz/column 1/.append style={anchor=base east}
		,/tikz/column 2/.append style={anchor=base west}]
		f^{(p)} \coloneqq f \times \id_{ R }\colon 
		X^{(p)} \arrow[r, "", rightarrow] &
		Y^{(p)}
	.\end{tikzcd}
	\end{equation} 
\end{ntt}


\begin{lem}\label{lem:FrobeniusHomomorphism}
	If $G$ is an $R$-group scheme, for $R$ a ring of characteristic $p$,
	the relative Frobenius $F_G\colon G \to G^{(p)}$ is a 
	homomorphism of $R$-group schemes.
\end{lem} 


\begin{defn}[Nilpotent Frobenius]\leavevmode\vspace{-1.2\baselineskip}\label{defn:nilpotentFrobenius}
\begin{enumerate}
\item We set, for any $X \in \mathsf{Sch}/S$ and any integer $n \geq 0$,
	$X^{(0)} \coloneqq X$ and $X^{(p^{n+1})} \coloneqq \left( X^{(p^{n})} \right)^{(p)}$.
	Then we denote by $F^n_X\colon X \to X^{(p^n)}$
	the $n$-fold composition
	\begin{equation}
	\begin{tikzcd}[column sep=4.3em]
		X \arrow[r, "F_X", rightarrow] &
		X^{(p)} \arrow[r, "F_{X^{(p)}}", rightarrow] &
		\cdots \arrow[r, "", rightarrow] &
		X^{(p^{n-1})} \arrow[r, "F_{X^{(p^{n-1})}}", rightarrow] &
		X^{(p^n)}
	.\end{tikzcd}
	\end{equation}
\item Assume now that $G \coloneqq X$ is an $S$-group scheme. 
	By \cref{lem:FrobeniusHomomorphism} $F^n_G$ is a group scheme homomorphism.
	We say that $F_G$ is {\em nilpotent} iff there is an integer $n \geq 1$ such that
	$F^n_G$ is the trivial homomorphism.
\end{enumerate}
\end{defn}


\noindent
The following results hold for group schemes over a field, hence we will replace
$R$ by a field $k$ of characteristic $p > 0$.
\begin{prop}[]\label{thm:FrobeniusChar1}
	Let $G$ be a finite $k$-group scheme.
	The following are equivalent:
\begin{enumerate}
	\item $G$ is étale,
	\item $\ker F_G = 1$,
	\item $F_G$ is an isomorphism.
\end{enumerate}
\end{prop}


\begin{prop}[]\label{thm:FrobeniusChar2}
	Let $G$ be a finite commutative $k$-group scheme.
	Then $G$ is connected iff $F_G$ is nilpotent.
\end{prop}


\begin{defn}[Verschiebung]
	Let $G$ be a finite, commutative $R$-group scheme.
	By \cref{thm:CartierDuality} $(G^{(p)})^D \simeq (G^D)^{(p)}$.
	One defines the {\em Verschiebung}, german for "the shift", homomorphism
	\begin{equation}
	\begin{tikzcd}[row sep = 0ex
		,/tikz/column 1/.append style={anchor=base east}
		,/tikz/column 2/.append style={anchor=base west}]
		V_G \coloneqq F^D_{G^D}\colon G^{(p)} \arrow[r, "", rightarrow] &
		G
	\end{tikzcd}
	\end{equation} 
	as the dual to $F_{G^D}\colon G^D \to (G^D)^{(p)} \simeq (G^{(p)})^D$,
	recalling that $((G^{(p)})^D)^D \simeq G^{(p)}$ and $(G^D)^D \simeq G$.
\end{defn}


\begin{rem}[]\leavevmode\vspace{-.2\baselineskip}
\begin{enumerate}
\item By Cartier duality one sees that $F^D_G = V_{G^D}$ and
	$V^D_G = F_{G^D}$.
\item One constructs $V^n_G$ by successive compositions as for $F^n_G$.
	Moreover one says that $V_G$ is nilpotent iff there exists an integer $n \geq 1$
	such that $V^n_G$ is the trivial homomorphism.
\end{enumerate}
\end{rem}


\noindent
Let's briefly quote a result, which is dual to
\cref{thm:FrobeniusChar1} and \cref{thm:FrobeniusChar2}.
\begin{prop}[]
	Let $G$ be a finite commutative $k$-group scheme. Then the following hold true.
\begin{enumerate}
	\item $\coker V_G = 1$ iff $V_G$ is an isomorphism iff
		$G^D$ is étale.
	\item $V_G$ is nilpotent iff $G^D$ is connected.
\end{enumerate}
\end{prop}


\noindent
We will conclude this section with a famous and useful relation between
Frobenius and Verschiebung:
\begin{thm}[{\cite[\S11.i]{MilneAG}}]\label{thm:FrobeniusVerschiebungRelation}
	Let $G$ be a finite commutative $k$-group scheme. Then the following
	diagram commutes
	\begin{equation}
	\begin{tikzcd}[column sep=1.5em]
		G \arrow[rr, "p \cdot \id_{ G }", rightarrow] 
		\arrow[rd, "F_G"', rightarrow] & &
		G \arrow[rd, "F_G", rightarrow] & \\
		&
		G^{(p)} \arrow[ru, "V_G"', rightarrow] 
		\arrow[rr, "p \cdot \id_{ G^{(p)} }"', rightarrow] & &
		G^{(p)}
	,\end{tikzcd}
	\end{equation}
	where $p \cdot \id_{ G }$ denotes the multiplication by $p$
	on $G$.
\end{thm}


%tk: should I write some examples for Frobenius morphism? Why not.
